<html>
<!-- Comment html -->
    <head>
        <script src="/PhaserLib/phaser.min.js"></script>
              
        <title> Template</title>
    </head>

    <body>
       <script type="text/javascript"> //spécifier le langage 
           // Comment jv
           var config = {
                    type: Phaser.AUTO,
                    width:800,
                    height:640,
                    physics:{
                        default : 'arcade'},
                        scene: { 
                            preload:preload,
                            create : create,
                            update : update
                        }                
                };
           
           var game = new Phaser.Game(config);
           var myShip, cursors, myBackground, myBullet, myEnnemy;
           
           function preload() {
               //this.load.image('background', '../Assets/background.png')
               this.load.image('spaceship', '../Assets/whaleship.png');
               this.load.image('star', '../Assets/star2.png');
               this.load.image('bullet', '../Assets/bullets.png')
               this.load.image('ennemy', '../Assets/ennemy.png')
               
               this.load.image('tiles', '../Assets/tiles.png');
               this.load.tilemapTiledJSON('background', 'background.json');
               
               
           };
           
           function create() {
               
               const map = this.make.tilemap({ key: 'background'});
               
               var tiles = map.addTilesetImage('Sci-fi', 'tiles', 16,16, 0,0);
               
               var layer = map.createStaticLayer (0, tiles,0,0);
               
               for (var i =0; i < 128; i++) {
                   this.add.sprite(Phaser.Math.Between(0,800), Phaser.Math.Between(0,640), 'star')
               }
              
               cursors = this.input.keyboard.createCursorKeys();
               //myBackground = this.add.image(400,300, 'background');
               
               myShip = this.physics.add.sprite(100,300, 'spaceship');
               myEnnemy = this.physics.add.sprite(510,530,'ennemy')
               
               
            };
           
           function update() {
                              
               myShip.setVelocity(0,0) //par défaut ne bouge pas
               
                                              
                    if (cursors.left.isDown) {
                    myShip.setVelocity(-100,0);
                    }

                    if (cursors.right.isDown) {
                    myShip.setVelocity(100,0);
                    }

                    if (cursors.up.isDown) {
                    myShip.setVelocity(0,-100);
                    }

                    if (cursors.down.isDown) {
                    myShip.setVelocity(0,100);
                    }   
                    
                    if (cursors.space.isDown) {
                    myBullet = this.physics.add.sprite(myShip.x + 10, myShip.y, 'bullet');
                        
                    myBullet.setVelocity(500,0);    }
               
                if (myShip.x < 0) {myShip.x = 0};
                if (myShip.x > 750) {myShip.x = 750};
                if (myShip.y < 0) {myShip.y = 0};
                if (myShip.y > 550) {myShip.y = 550};

           }
           
        </script>
        
    </body>

</html>