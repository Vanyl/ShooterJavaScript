<html>

<head>
    <script src="/ShooterJavaScript/PhaserLib/phaser.min.js"></script>
    <title> </title>
</head>

<body>
    <script type="text/javascript">
        var config = {
            type: Phaser.AUTO,
            width: 360,
            height: 640,
            physics: {
                default: 'arcade'
            },
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        var game = new Phaser.Game(config);
        
        var testJson = '{ "question" : "Ca va ?","reponse" : ["Oui","Non","Et toi Ã§a va ?"]}';

        //var testObject = JSON.parse(testJson);

        var sprite1;
        var testObject, answer;
        var choice1, choice2;
        
        



        function preload() {
            this.load.image('question', './Assets/conversation.png');
            this.load.image('reponse', './Assets/reponse.png');
            this.load.image('choice', './Assets/choice.png');
            
            this.load.text('SequenceQR', 'SequenceQR.json')

        }

        function create() {
            
            this.cameras.main.setBackgroundColor(0xbababa);
            
            //Rajout des bulles conversations
            this.add.sprite(100, 50, 'question');
            //this.add.sprite(100, 100, 'reponse');
            
            sprite1 = this.add.sprite(110, 555, 'choice').setInteractive();
            sprite2 = this.add.sprite(110, 610, 'choice').setInteractive();            
            //Rajout fichier JSON
            testObject = JSON.parse(this.cache.text.get("SequenceQR"));

            //Lien bulle/texte
            var question = this.add.text(40,50,testObject.Sequence[0].question);
            //var answer = this.add.text(70, 500, testObject.reponse[0]);
            choice1 = this.add.text(70, 555, testObject.Sequence[0].answer1);
            choice2 = this.add.text(70, 610, testObject.Sequence[0].answer2);
            
            
            //Couleur texte
            

            //Event clic            
                        
            sprite1.on('pointerdown', addResponse1, this);
            sprite2.on('pointerdown', addResponse2,this);
            
            //Disparition
            
            
            
            
        }

        
        function addResponse1() {
            var answer_sprite = this.add.sprite(100, 100, 'reponse');
            answer = this.add.text(80, 100, testObject.Sequence[0].answer1); 
            
            choice1.setVisible(false);
            sprite1.setVisible(false);
            
            choice2.setVisible(false);
            sprite2.setVisible(false);
        }
        
        function addResponse2() {
            var answer_sprite = this.add.sprite(100, 100, 'reponse');
            answer = this.add.text(80, 100, testObject.Sequence[0].answer2);
            
            choice2.setVisible(false);
            sprite2.setVisible(false);
            
            choice1.setVisible(false);
            sprite1.setVisible(false);
        }
        
        


        function update() {
            
            
            

        }
        
    </script>

</body></html>
